# 基于Qt的带有危险提醒功能的网络联机五子棋对战游戏

本项目实现了一个基于Qt的可以双人联网对战的五子棋游戏，在特定情况下，还会给出危险提示。这些情况包括：对方再落一子，出现至少两个无阻挡的三个连续子；对方再落一子，出现至少一个无阻挡的三个连续子以及一个有单侧阻挡的四个连续子；对方再落一子，出现至少一个无阻挡的四个连续子；对方再落一子，获胜。

## 总体架构

本项目分为主机程序和客户端程序。其中，客户端程序只包括客户端模块，主机程序包括客户端模块以及服务器模块。

### 客户端模块

客户端模块包括一个`QWidget`的子类实例作为棋盘以及一些`QLabel`来显示信息，它负责接收服务器的指令来进行显示、锁定、解锁棋盘以及显示信息等操作，并根据用户操作向服务器发送相关操作数据来进行游戏，还进行一些不关键的计算，比如危险提醒。

客户端模块与服务器通信方式分为两种，但宏观来看，它们传输的数据是相同的，均为`QJsonObject`对象。

一种是使用`QTcpSocket`类以及一个自制的用于处理协议的`JsonSession`实例与服务器通信。

`JsonSession`在每次`QTcpSocket`的`readyRead()`信号触发时读取内容，记录当前读取状态以便之后继续读取，当一个“包”（通信协议中会规定“包”）接收完毕之后，触发一个`onMessage(QJsonObject)`信号来宣告收到数据，通知相关模块进行处理。发送的时候，直接将`QJsonObject`对象根据协议发送到`QTcpSocket`，传输到网络。这种方法适用于服务端模块和客户端模块通过网络连接的情况。

另外一种是直接使用Qt的信号槽机制来传输`QJsonObject`对象。这种方法适用于服务端模块和客户端模块处于同一程序的情况。

### 服务端模块

服务端模块是负责提供服务的，也用上述办法

顺便指出，由于本架构的特点，它可以轻易地升级为有中心服务器的支持多人两两对战的五子棋游戏平台。中心服务器只需要包括服务器模块来进行计算和服务。

## 通信协议

### 例子

下面的例子由真实TCP流抓包获得。

#### 一轮回合

## 算法

